<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScrollTrigger to | JS</title>
    <link rel="stylesheet" href="../styles/reset.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/ScrollTrigger.min.js"></script>
    <style>
        body {
            background: linear-gradient(lightpink, lightblue);
        }
        div.box {height: 100vh; font-size: 5rem;}
        /* .box2 h1 {
            opacity: 0; transform: translateX(300px);/* заранее  готовим CSS который будем менять в JS } */
    </style>
</head>
<body>
    <div class="box">1</div>
    <div class="box box2 box_ani">
        <h1 class="title">2</h1>
        <p class="contents">2-2</p>
    </div><!-- h2 ani 주기 -->
    <div class="box box3 box_ani">
        <h1 class="title">3</h1>
        <ul class="contents">
            <li>3-2</li>
        </ul>
    </div>
    <div class="box">4</div>
    <script>
        gsap.registerPlugin(ScrollTrigger);
        //gsap.to
        //시작 CSS, 종료 gsap.to
        /* gsap.to('.box2 h1', {
            scrollTrigger: {//начало настройки триггера
                trigger: '.box2',//когда во вью-порте будет видна .box2 = триггер
                markers:true,
                start: 'top 80%',
            }, //конец настройки триггера
            opacity:1,
            x: 0,
            delay:1,
        }) */

        //gsap.fromTo
        /* gsap.fromTo('.box3 h1', {
            opacity: 0,
            x:200, y:-50,
        },{
            scrollTrigger: {
                trigger: '.box3',
                markers:true,
                start: 'top center',
            },
            opacity:1,
            x:0, y:50, delay:1, duration:2,
        }) */

        const title = document.querySelectorAll('.title');//ani 대상 변수
        const contents = document.querySelectorAll('.contents'); //ani 대상 변수
        const box = document.querySelectorAll('.box_ani');//trigger 변수
        console.log(title, contents, box)
        box.forEach((obj, ind, arr)=>{
            console.log(obj, ind, arr)
            gsap.fromTo(title[ind], {
                opacity: 0, y:50,
            },{
                scrollTrigger: {
                    trigger: obj, //это сам box (объект) = когда во вьюпорте появится box покажи анимацию для title[ind]
                    start: 'top center',
                    markers:true,
                },
                opacity:1, y:0, duration:1,
            })
            gsap.fromTo(contents[ind], {
                opacity: 0, y:100,
            },{
                scrollTrigger: {
                    trigger: obj,
                    start: 'top center',
                    markers: true,
                },
                opacity:1, y:0, duration:2,
            })
        })
    </script>
</body>
</html>